<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" />

</head>
<style>
    #container_map {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }

    #container_stacked {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }

    #container_line {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }

    #container_sankey {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }

    #container_heatmap {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }

    #container_circular {
        border: 2px solid #000;
        border-radius: 5px;
        background: #F0F8FF;
    }
</style>


<body class="bg-dark text-black">
    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="row clearfix">
                    <div class="col-md-7 column">
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_map">
                                    <h4>container_map</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-6 column">
                                <div id="container_circular">
                                    <h4>container_circular</h4>
                                </div>
                            </div>
                            <div class="col-md-6 column">
                                <div id="container_line">
                                    <h4>container_line</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 column">
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_sankey">
                                    <h4>container_sankey</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_heatmap">
                                    <h4>container_heatmap</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_stacked">
                                    <h4>container_stacked</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    d3.select(window).on("resize", throttle);
    var width4 = document.getElementById('container_map').offsetWidth;
    var height1 = width4 / 1.9;

    var width2 = document.getElementById('container_stacked').offsetWidth;
    var height2 = width2 / 2.8;

    var width3 = document.getElementById('container_line').offsetWidth;
    var height3 = width3 / 2;

    var width4 = document.getElementById('container_sankey').offsetWidth;
    var height4 = width4 / 3;

    var width5 = document.getElementById('container_heatmap').offsetWidth;
    var height5 = width5 / 3;

    var width6 = document.getElementById('container_circular').offsetWidth;
    var height6 = width6 / 2;

    var svg1, svg2, svg3, svg4, svg5, svg6;

    var throttleTimer;

    setup();

    function setup() {
        margin1 = { top: 10, right: 10, bottom: 10, left: 10 },
            width4 = width4 - margin1.left - margin1.right,
            height1 = height1 - margin1.top - margin1.bottom;

        svg1 = d3.select("#container_map").append("svg")
            .attr("width", width4 + margin1.left + margin1.right)
            .attr("height", height1 + margin1.top + margin1.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin1.left + "," + margin1.top + ")");

        margin2 = { top: 10, right: 10, bottom: 10, left: 10 },
            width2 = width2 - margin2.left - margin2.right,
            height2 = height2 - margin2.top - margin2.bottom;

        svg2 = d3.select("#container_stacked").append("svg")
            .attr("width", width2 + margin2.left + margin2.right)
            .attr("height", height2 + margin2.top + margin2.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin2.left + "," + margin2.top + ")");

        margin3 = { top: 10, right: 10, bottom: 10, left: 10 },
            width3 = width3 - margin3.left - margin3.right,
            height3 = height3 - margin3.top - margin3.bottom;

        svg3 = d3.select("#container_line").append("svg")
            .attr("width", width3 + margin3.left + margin3.right)
            .attr("height", height3 + margin3.top + margin3.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin3.left + "," + margin3.top + ")");

        margin4 = { top: 10, right: 10, bottom: 10, left: 10 },
            width4 = width4 - margin4.left - margin4.right,
            height4 = height4 - margin4.top - margin4.bottom;

        svg4 = d3.select("#container_sankey").append("svg")
            .attr("width", width4 + margin4.left + margin4.right)
            .attr("height", height4 + margin4.top + margin4.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin4.left + "," + margin4.top + ")");

        margin5 = { top: 10, right: 10, bottom: 10, left: 10 },
            width5 = width5 - margin5.left - margin5.right,
            height5 = height5 - margin5.top - margin5.bottom;

        svg5 = d3.select("#container_heatmap").append("svg")
            .attr("width", width5 + margin5.left + margin5.right)
            .attr("height", height5 + margin5.top + margin5.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin5.left + "," + margin5.top + ")");

        margin6 = { top: 10, right: 10, bottom: 10, left: 10 },
            width6 = width6 - margin6.left - margin6.right,
            height6 = height6 - margin6.top - margin6.bottom;

        svg6 = d3.select("#container_circular").append("svg")
            .attr("width", width6 + margin6.left + margin6.right)
            .attr("height", height6 + margin6.top + margin6.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin6.left + "," + margin6.top + ")");
    }

    function redraw() {
        width4 = document.getElementById('container_map').offsetWidth;
        height1 = width4 / 1.71;
        width2 = document.getElementById('container_stacked').offsetWidth;
        height2 = width2 / 2;
        width3 = document.getElementById('container_line').offsetWidth;
        height3 = width3 / 2;
        width4 = document.getElementById('container_sankey').offsetWidth;
        height4 = width4 / 3;
        width5 = document.getElementById('container_heatmap').offsetWidth;
        height5 = width5 / 3;
        width6 = document.getElementById('container_circular').offsetWidth;
        height6 = width6 / 2;

        d3.selectAll('svg').remove();
        setup();
    }

    function kernelDensityEstimator(kernel, X) {
        return function (V) {
            return X.map(function (x) {
                return [x, d3.mean(V, function (v) { return kernel(x - v); })];
            });
        };
    }

    function kernelEpanechnikov(k) {
        return function (v) {
            return Math.abs(v /= k) <= 1 ? 0.75 * (1 - v * v) / k : 0;
        };
    }

    function throttle() {
        window.clearTimeout(throttleTimer);
        throttleTimer = window.setTimeout(function () {
            redraw();
        }, 200);
    }
</script>

</html>