<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="js/lineChart.js"></script>
    <script src="js/heatMap.js"></script>
    <script src="js/stackBarChart.js"></script>
    <script src="js/feature.js"></script>
    <script src="js/bubbleGraph.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" />

</head>
<style>
    #container_map {
        border: 1px solid #000;
        border-radius: 0px;
    }

    #container_stacked {
        border: 1px solid #000;
        border-radius: 0px;
    }

    #container_line {
        border: 1px solid #000;
        border-radius: 0px;
    }

    #container_sankey {
        border: 1px solid #000;
        border-radius: 0px;
    }

    #container_bubble {
        border: 1px solid #000;
        border-radius: 0px;
    }

    #container_circular {
        border: 1px solid #000;
        border-radius: 0px;
    }

    [class ^="col-md-12"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }

    [class ^="col-md-7"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 30px;
        padding-right: 15px;
    }

    [class ^="col-md-5"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 15px;
        padding-right: 30px;
    }

    [class ^="col-md-4"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }

    [class ^="col-md-8"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }

    [class ^="col-md-6"] {
        padding-top: 0px;
        padding-bottom: 0px;
        padding-left: 0px;
        padding-right: 0px;
    }

    path.domain {
        stroke: white;
    }

    .tick text {
        fill: white;
    }

    .tick line {
        stroke: white;
    }

    #choiceWindow {
        display: none;
        position: absolute;
        top: 5%;
        left: 5%;
        width: 90%;
        height: 90%;
        padding: 20px;
        border: 3px solid #ccc;
        z-index: 10;
        overflow: auto;
    }

    #backGround {
        display: none;
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 1100px;
        background-color: black;
        z-index: 9;
        -moz-opacity: 0.8;
        opacity: 1.0;
        filter: alpha(opacity=100);
    }

    #x:hover {
        cursor: pointer;
        color: rgb(55, 198, 192);
    }

    .hidden {
        display: none;
    }

    .tooltip {
        color: rgb(0, 0, 0);
        background: #fff;
        padding: .5em;
        text-shadow: #f5f5f5 0 1px 0;
        border-radius: 2px;
        box-shadow: 0px 0px 2px 0px #a6a6a6;
        opacity: 0.9;
        position: absolute;
    }
</style>


<body class="bg-dark text-white">
    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <div class="row clearfix">
                    <div class="col-md-7 column">
                        <div class="row clearfix">
                            <div class="col-md-6 column">
                                <div id="container_map">
                                    <h4>container_map</h4>
                                </div>
                            </div>
                            <div class="col-md-6 column">
                                <div id="container_bubble">
                                    <h4>container_bubble</h4>
                                </div>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-4 column">
                                <div id="container_circular">
                                    <h4>container_circular</h4>
                                </div>
                            </div>
                            <div class="col-md-8 column">
                                <div id="container_line">
                                    <h4>container_line</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5 column">
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_sankey">
                                    <h4>container_sankey</h4>
                                </div>
                            </div>
                        </div>

                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <div id="container_stacked">
                                    <h4>container_stacked</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="choiceWindow">
        <label id="x" style="position: absolute;top:0px;left: 95%;font-size: 25px;">x</label>
        <div class="row clearfix">
            <div class="col-md-6 column">
                <div id="container_personalMap">
                    <h4>container_personalMap</h4>
                </div>
            </div>
            <div class="col-md-6 column">
                <div class="row clearfix">
                    <div class="col-md-6 column">
                        <div id="container_feature">
                            <h4>container_feature</h4>
                        </div>
                    </div>

                    <div class="col-md-6 column">
                        <div id="container_timeScheduler">
                            <h4>container_timeScheduler</h4>
                        </div>
                    </div>

                </div>
                <div class="row clearfix">
                    <div class="col-md-12 column">
                        <div id="container_personalBubble">
                            <h4>container_personalBubble</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="backGround"></div>

</body>

<script>

    d3.select(window).on("resize", throttle);
    var width4 = document.getElementById('container_map').offsetWidth;
    var height1 = width4 / 1.03;
    var width2 = document.getElementById('container_stacked').offsetWidth;
    var height2 = width2 / 2.88;
    var width3 = document.getElementById('container_line').offsetWidth;
    var height3 = width3 / 2.7;
    var width4 = document.getElementById('container_sankey').offsetWidth;
    var height4 = width4 / 1.46;
    var width5 = document.getElementById('container_bubble').offsetWidth;
    var height5 = width5 / 1.03;
    var width6 = document.getElementById('container_circular').offsetWidth;
    var height6 = width6 / 1.35;
    var width7 = document.getElementById('container_feature').offsetWidth;
    var height7 = width7 / 2.5;

    var svg1, svg2, svg3, svg4, svg5, svg6, svg7;

    var throttleTimer;


    setup();
    var mainHall = [];
    var a_string, b_string;
    for (var a = 2; a < 12; ++a) {
        for (var b = 19; b < 29; ++b) {
            if (a < 10)
                a_string = '10' + a.toString();
            else
                a_string = '1' + a.toString();
            if (b < 10)
                b_string = '0' + b.toString();
            else
                b_string = b.toString();
            mainHall.push(a_string + b_string);
        }
    }

    var HallA = [];
    for (var a = 2; a < 4; ++a) {
        for (var b = 1; b < 6; ++b) {
            if (a < 10)
                a_string = '10' + a.toString();
            else
                a_string = '1' + a.toString();
            if (b < 10)
                b_string = '0' + b.toString();
            else
                b_string = b.toString();
            HallA.push(a_string + b_string);
        }
    }

    var HallB = [];
    for (var a = 4; a < 6; ++a) {
        for (var b = 1; b < 6; ++b) {
            if (a < 10)
                a_string = '10' + a.toString();
            else
                a_string = '1' + a.toString();
            if (b < 10)
                b_string = '0' + b.toString();
            else
                b_string = b.toString();
            HallB.push(a_string + b_string);
        }
    }

    var HallC = [];
    for (var a = 6; a < 8; ++a) {
        for (var b = 1; b < 6; ++b) {
            if (a < 10)
                a_string = '10' + a.toString();
            else
                a_string = '1' + a.toString();
            if (b < 10)
                b_string = '0' + b.toString();
            else
                b_string = b.toString();
            HallC.push(a_string + b_string);
        }
    }

    var HallD = [];
    var a_string, b_string;
    for (var a = 8; a < 10; ++a) {
        for (var b = 1; b < 6; ++b) {
            if (a < 10)
                a_string = '10' + a.toString();
            else
                a_string = '1' + a.toString();
            if (b < 10)
                b_string = '0' + b.toString();
            else
                b_string = b.toString();
            HallD.push(a_string + b_string);
        }
    }
    draw_line(mainHall);
    draw_stack(["toilet1", "toilet2", "toilet3"]);
    draw_bubble();
    data_prepare();

    function setup() {
        margin1 = { top: 10, right: 10, bottom: 10, left: 10 },
            width4 = width4 - margin1.left - margin1.right,
            height1 = height1 - margin1.top - margin1.bottom;

        svg1 = d3.select("#container_map").append("svg")
            .attr("width", width4 + margin1.left + margin1.right)
            .attr("height", height1 + margin1.top + margin1.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin1.left + "," + margin1.top + ")");

        margin2 = { top: 40, right: 120, bottom: 50, left: 60 },
            width2 = width2 - margin2.left - margin2.right,
            height2 = height2 - margin2.top - margin2.bottom;

        svg2 = d3.select("#container_stacked").append("svg")
            .attr("width", width2 + margin2.left + margin2.right)
            .attr("height", height2 + margin2.top + margin2.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin2.left + "," + margin2.top + ")");

        margin3 = { top: 10, right: 30, bottom: 30, left: 50 },
            width3 = width3 - margin3.left - margin3.right,
            height3 = height3 - margin3.top - margin3.bottom;

        svg3 = d3.select("#container_line").append("svg")
            .attr("width", width3 + margin3.left + margin3.right)
            .attr("height", height3 + margin3.top + margin3.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin3.left + "," + margin3.top + ")");

        margin4 = { top: 10, right: 10, bottom: 10, left: 10 },
            width4 = width4 - margin4.left - margin4.right,
            height4 = height4 - margin4.top - margin4.bottom;

        svg4 = d3.select("#container_sankey").append("svg")
            .attr("width", width4 + margin4.left + margin4.right)
            .attr("height", height4 + margin4.top + margin4.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin4.left + "," + margin4.top + ")");

        margin5 = { top: 210, right: 10, bottom: 30, left: 10 },
            width5 = width5 - margin5.left - margin5.right,
            height5 = height5 - margin5.top - margin5.bottom;

        svg5 = d3.select("#container_bubble").append("svg")
            .attr("width", width5 + margin5.left + margin5.right)
            .attr("height", height5 + margin5.top + margin5.bottom)
            .append("g")
            .attr("transform",
                "translate(" + (width5 / 2 + margin5.left) + "," + margin5.top + ")");

        margin6 = { top: 10, right: 10, bottom: 10, left: 10 },
            width6 = width6 - margin6.left - margin6.right,
            height6 = height6 - margin6.top - margin6.bottom;

        svg6 = d3.select("#container_circular").append("svg")
            .attr("width", width6 + margin6.left + margin6.right)
            .attr("height", height6 + margin6.top + margin6.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin6.left + "," + margin6.top + ")");
    }

    function windowSetup() {
        margin7 = { top: 50, right: 100, bottom: 30, left: 10 },
            width7 = width7 - margin7.left - margin7.right,
            height7 = height7 - margin7.top - margin7.bottom;

        svg7 = d3.select("#container_feature").append("svg")
            .attr("width", width7 + margin7.left + margin7.right)
            .attr("height", height7 + margin7.top + margin7.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin7.left + "," + margin7.top + ")");
    }

    function redraw() {
        width4 = document.getElementById('container_map').offsetWidth;
        height1 = width4 / 1.03;
        width2 = document.getElementById('container_stacked').offsetWidth;
        height2 = width2 / 2.88;
        width3 = document.getElementById('container_line').offsetWidth;
        height3 = width3 / 2.7;
        width4 = document.getElementById('container_sankey').offsetWidth;
        height4 = width4 / 1.46;
        width5 = document.getElementById('container_bubble').offsetWidth;
        height5 = width5 / 1.03;
        width6 = document.getElementById('container_circular').offsetWidth;
        height6 = width6 / 1.35;
        width7 = document.getElementById('container_feature').offsetWidth;
        height7 = width7 / 2.5;

        d3.selectAll('svg').remove();
        setup();
        draw_line(mainHall);
        draw_stack(["toilet1"]);
        draw_bubble();
    }


    $(document).ready(function () {
        $("#x").click(function () {
            $("#choiceWindow").slideUp(300);
            $("#backGround").hide();
            d3.select("#choiceWindow").selectAll('svg').remove();
        })
    });

    function throttle() {
        window.clearTimeout(throttleTimer);
        throttleTimer = window.setTimeout(function () {
            redraw();
        }, 200);
    }
</script>

</html>